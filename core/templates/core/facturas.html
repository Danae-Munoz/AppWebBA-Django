{% extends "core/base.html" %}
{% load humanize %}

{% block content %}
<h1 class="mb-4">Listado de facturas{% if es_admin %} (Administración){% endif %}</h1>

<table class="table table-striped">
    <thead>
        <tr>
            <th>N° Factura</th>
            <th>Cliente (RUT)</th>
            <th>Fecha</th>
            <th>Descripción</th>
            <th>Monto</th>
            <th>ID Prod.</th>
            <th>Guía despacho</th>
            <th>Estado GD</th>
        </tr>
    </thead>
    <tbody>
        {% for f in facturas %}
        <tr>
            <td>{{ f.nrofac }}</td>
            <td>{{ f.rutcli }}</td>
            <td>{{ f.fechafac|date:"d‑m‑Y" }}</td>
            <td>{{ f.descfac }}</td>
            <td>${{ f.monto|intcomma }}</td>
            <td>{{ f.idprod }}</td>
            {% if f.guia %}
                <td>{{ f.guia.nrogd }}</td>
                <td>{{ f.guia.estadogd }}</td>
            {% else %}
                <td colspan="2" class="text-muted">—</td>
            {% endif %}
        </tr>
        {% empty %}
        <tr><td colspan="8" class="text-center">No hay facturas para mostrar.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
